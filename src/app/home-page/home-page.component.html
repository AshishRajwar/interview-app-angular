<p>home-page works!</p>

<div style="margin-bottom: 40px;">
  <h2>Add Transaction</h2>
  <form (ngSubmit)="onSubmit()" #transactionForm="ngForm">

    <label for="amount">Amount:</label>
    <input type="number" id="amount" [(ngModel)]="newTransaction.amount" name="amount" min="1" required #amount="ngModel" />
    <div *ngIf="amount.invalid && (amount.dirty || amount.touched)" style="color: red;">
      <small *ngIf="amount.errors?.['required']">Amount is required.</small>
      <small *ngIf="amount.errors?.['min']">Amount must be greater than 1.</small>
    </div>

    <label for="date">Date:</label>
    <input type="datetime-local" id="date" [(ngModel)]="newTransaction.timestamp" name="date" required  min="2023-01-01T00:00" max="2024-12-31T23:59" #date="ngModel" />
    <div *ngIf="(!isDateTimeValid() || date.invalid ) && (date.dirty || date.touched)" style="color: red;">
      <small *ngIf="date.errors?.['required']">Date and time are required.</small>
      <small *ngIf="!date.errors?.['required'] && !isDateTimeValid()">Date and time must be within the allowed range January 1, 2023 and December 31, 2024.</small>
    </div>

    <label for="type">Transaction-Type:</label>
    <select id="type" [(ngModel)]="newTransaction.transactionType" name="type" required>
      <option value="REFUND">REFUND</option>
      <option value="SALE">SALE</option>
    </select>

    <label for="status">Status:</label>
    <select id="status" [(ngModel)]="newTransaction.status" name="status" required>
      <option value="FAILED">FAILED</option>
      <option value="DECLINED">DECLINED</option>
      <option value="APPROVED">APPROVED</option>
    </select>

    <label for="currency">Currency:</label>
    <select id="currency" [(ngModel)]="newTransaction.currency" name="currency" required>
      <option value="EUR">EUR</option>
      <option value="GBP">GBP</option>
      <option value="INR">INR</option>
    </select>

    <button type="submit" [disabled]="!transactionForm.valid || !isDateTimeValid()">Add Transaction</button>
  </form>
</div>

<div style="margin-bottom: 40px;">
  <div>
    <input
      type="number"
      [(ngModel)]="userId" 
      placeholder="Enter user ID"
    />
    <button (click)="getTransactionByID()">Get Transactions By ID</button>
  </div>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Amount</th>
          <th>Time</th>
          <th>TransactionType</th>
          <th>Status</th>
          <th>Currency</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ transaction.id }}</td>
          <td>{{ transaction.amount }}</td>
          <td>{{ transaction.timestamp }}</td>
          <td>{{ transaction.transactionType }}</td>
          <td>{{ transaction.status }}</td>
          <td>{{ transaction.currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div *ngIf="errorMessage!=null" style="color: red;">
    {{errorMessage}}
  </div>
</div>

<button (click)="getTransaction()">Get Transactions</button>
<div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Amount</th>
          <th>Time</th>
          <th>TransactionType</th>
          <th>Status</th>
          <th>Currency</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let transaction of transactions; let i = index">
          <td>{{ transaction.id }}</td>
          <td>{{ transaction.amount }}</td>
          <td>{{ transaction.timestamp }}</td>
          <td>{{ transaction.transactionType }}</td>
          <td>{{ transaction.status }}</td>
          <td>{{ transaction.currency }}</td>
        </tr>
      </tbody>
    </table>
</div>